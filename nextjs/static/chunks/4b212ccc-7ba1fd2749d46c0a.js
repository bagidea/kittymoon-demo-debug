"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{5234:function(t,e,r){r.d(e,{$e:function(){return it},AQ:function(){return pt},AU:function(){return rt},Hx:function(){return Ee},Ir:function(){return et},Jj:function(){return m},MX:function(){return ot},Nz:function(){return v},Pc:function(){return kt},V5:function(){return Bt},V9:function(){return _},VG:function(){return dt},W4:function(){return b},WU:function(){return Lt},YW:function(){return $t},_A:function(){return B},_q:function(){return It},aU:function(){return Pt},dL:function(){return ht},ei:function(){return zt},j8:function(){return U},lP:function(){return Be},ln:function(){return Y},nh:function(){return At},uQ:function(){return qt},xH:function(){return P},zM:function(){return V}});var o=r(9931),i=r.n(o),n=r(3715),a=r(3550),s=r.n(a),c=r(6266),d=r(655);function u(t,e){const r=t.length;if(r!==e.length)return!1;for(let o=0;o<r;o++)if(t[o]!==e[o])return!1;return!0}const l={};function p(){l.enc=new Array(255),l.dec={};for(let t=0;t<=255;++t){const e=t.toString(16).padStart(2,"0");l.enc[t]=e,l.dec[e]=t}}function f(t){l.enc||p();const e=t.length,r=new Array(e);for(let o=0;o<e;++o)r[o]=l.enc[t[o]];return r.join("")}function h(t){return i()(t)}let y=!1;function _(t,e){if(t instanceof e)return!0;if(null==t||"object"!==typeof t)return!1;const r=e.__className||e.abiName;if(!r)return!1;let o=t.constructor,i=!1;for(;o&&!i;){const t=o.__className||o.abiName;if(!t)break;i=r==t,o=Object.getPrototypeOf(o)}return i&&!y&&(console.warn(`Detected alien instance of ${r}, this usually means more than one version of @greymass/eosio has been included in your bundle.`),y=!0),i}class m{constructor(t=new Uint8Array){this.array=t}static from(t,e){return _(t,this)?t:"string"===typeof t?this.fromString(t,e):ArrayBuffer.isView(t)?new this(new Uint8Array(t.buffer,t.byteOffset,t.byteLength)):_(t.array,Uint8Array)?new this(t.array):new this(new Uint8Array(t))}static fromString(t,e="hex"){if("hex"===e){return new this(function(t){if(l.dec||p(),"string"!==typeof t)throw new Error("Expected string containing hex digits");if(t.length%2)throw new Error("Odd number of hex digits");const e=(t=t.toLowerCase()).length/2,r=new Uint8Array(e);for(let o=0;o<e;o++){const e=l.dec[t[2*o]+t[2*o+1]];if(void 0===e)throw new Error("Expected hex string");r[o]=e}return r}(t))}if("utf8"==e){return new this((new TextEncoder).encode(t))}throw new Error(`Unknown encoding: ${e}`)}static fromABI(t){const e=t.readVaruint32();return new this(t.readArray(e))}static abiDefault(){return new m}static equal(t,e){return this.from(t).equals(this.from(e))}static random(t){return new this(h(t))}static isBytes(t){return!(!_(t,m)&&!_(t,Uint8Array))||(!(!Array.isArray(t)||!t.every((t=>"number"===typeof t)))||!("string"!==typeof t||!/[\da-f]/i.test(t)&&""!==t))}get length(){return this.array.byteLength}get hexString(){return f(this.array)}get utf8String(){return(new TextDecoder).decode(this.array)}append(t){t=m.from(t);const e=this.array.byteLength+t.array.byteLength,r=new ArrayBuffer(e),o=new Uint8Array(r);o.set(this.array),o.set(t.array,this.array.byteLength),this.array=o}appending(t){const e=new m(this.array);return e.append(t),e}zeropad(t,e=!1){const r=e?t:Math.max(t,this.array.byteLength),o=new ArrayBuffer(r),i=new Uint8Array(o);i.fill(0),e&&this.array.byteLength>r?i.set(this.array.slice(0,r),0):i.set(this.array,r-this.array.byteLength),this.array=i}zeropadded(t,e=!1){const r=new m(this.array);return r.zeropad(t,e),r}dropFirst(t=1){this.array=this.array.subarray(t)}droppingFirst(t=1){return new m(this.array.subarray(t))}copy(){const t=new ArrayBuffer(this.array.byteLength),e=new Uint8Array(t);return e.set(this.array),new m(e)}equals(t){return u(this.array,m.from(t).array)}toString(t="hex"){if("hex"===t)return this.hexString;if("utf8"===t)return this.utf8String;throw new Error(`Unknown encoding: ${t}`)}toABI(t){t.writeVaruint32(this.array.byteLength),t.writeArray(this.array)}toJSON(){return this.hexString}}m.abiName="bytes";class g{constructor(t){const e=this.constructor.byteSize;if(t.byteLength!==e)throw new Error(`Checksum size mismatch, expected ${e} bytes got ${t.byteLength}`);this.array=t}static from(t){return _(t,this)?t:_(t,g)?new this(t.array):new this(m.from(t).array)}static fromABI(t){return new this(t.readArray(this.byteSize))}static abiDefault(){return new this(new Uint8Array(this.byteSize))}equals(t){const e=this.constructor;try{return u(this.array,e.from(t).array)}catch{return!1}}get hexString(){return f(this.array)}toABI(t){t.writeArray(this.array)}toString(){return this.hexString}toJSON(){return this.toString()}}g.abiName="__checksum";class v extends g{static from(t){return super.from(t)}static hash(t){const e=new Uint8Array((0,n.sha256)().update(m.from(t).array).digest());return new v(e)}}v.abiName="checksum256",v.byteSize=32;class b extends g{static from(t){return super.from(t)}static hash(t){const e=new Uint8Array((0,n.sha512)().update(m.from(t).array).digest());return new b(e)}}b.abiName="checksum512",b.byteSize=64;class w extends g{static from(t){return super.from(t)}static hash(t){const e=new Uint8Array((0,n.ripemd160)().update(m.from(t).array).digest());return new w(e)}}var A;w.abiName="checksum160",w.byteSize=20,function(t){t.K1="K1",t.R1="R1",t.WA="WA"}(A||(A={})),function(t){t.indexFor=function(e){switch(e){case t.K1:return 0;case t.R1:return 1;case t.WA:return 2;default:throw new Error(`Unknown curve type: ${e}`)}},t.from=function(e){let r;switch(r="number"!==typeof e?t.indexFor(e):e,r){case 0:return t.K1;case 1:return t.R1;case 2:return t.WA;default:throw new Error("Unknown curve type")}}}(A||(A={}));class x{constructor(t){const e=this.constructor;if(void 0===e.isSigned||void 0===e.byteWidth)throw new Error("Cannot instantiate abstract class Int");if(t.gt(e.max))throw new Error(`Number ${t} overflows ${e.abiName}`);if(t.lt(e.min))throw new Error(`Number ${t} underflows ${e.abiName}`);this.value=t}static get max(){return new(s())(2).pow(new(s())(8*this.byteWidth-(this.isSigned?1:0))).isubn(1)}static get min(){return this.isSigned?this.max.ineg().isubn(1):new(s())(0)}static add(t,e,r="truncate"){return x.operator(t,e,r,((t,e)=>t.add(e)))}static sub(t,e,r){return x.operator(t,e,r,((t,e)=>t.sub(e)))}static mul(t,e,r){return x.operator(t,e,r,((t,e)=>t.mul(e)))}static div(t,e,r){return x.operator(t,e,r,((t,e)=>{if(e.isZero())throw new Error("Division by zero");return t.div(e)}))}static divRound(t,e,r){return x.operator(t,e,r,((t,e)=>{if(e.isZero())throw new Error("Division by zero");return t.divRound(e)}))}static divCeil(t,e,r){return x.operator(t,e,r,((t,e)=>{if(e.isZero())throw new Error("Division by zero");const r=t.divmod(e);return r.mod.isZero()?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)}))}static operator(t,e,r="truncate",o){const{a:i,b:n}=function(t,e){t=q(t),e=q(e);const r=t.constructor,o=e.constructor;r!==o&&(r.isSigned===o.isSigned?r.byteWidth>o.byteWidth?e=e.cast(r):o.byteWidth>r.byteWidth&&(t=t.cast(o)):!1===r.isSigned&&r.byteWidth>=o.byteWidth?e=e.cast(r):!1===o.isSigned&&o.byteWidth>=r.byteWidth?t=t.cast(o):!0===r.isSigned&&r.max.gte(o.max)&&r.min.lte(o.min)?e=e.cast(r):!0===o.isSigned&&o.max.gte(r.max)&&o.min.lte(r.min)&&(t=t.cast(o)));return{a:t,b:e}}(t,e),a=i.constructor,s=o(i.value,n.value);return a.from(s,r)}static from(t,e){if(_(t,this))return t;let r,o=this;if(_(t,x))o=t.constructor,r=t.value.clone();else if(t instanceof Uint8Array)r=new(s())(t,void 0,"le"),o.isSigned&&(r=r.fromTwos(8*o.byteWidth));else{if("string"===typeof t&&!/[0-9]+/.test(t)||"number"===typeof t&&!Number.isFinite(t))throw new Error("Invalid number");r=s().isBN(t)?t.clone():new(s())(t,10),r.isNeg()&&!o.isSigned&&(o={byteWidth:o.byteWidth,isSigned:!0})}switch(e){case"clamp":i=r,n=this.min,a=this.max,r=s().min(s().max(i,n),a);break;case"truncate":r=function(t,e,r){const o=t.isNeg()?255:0,i=(e.isSigned?t.toTwos(8*e.byteWidth):t).toArrayLike(Uint8Array,"le"),n=new Uint8Array(r.byteWidth);n.fill(o),n.set(i.slice(0,r.byteWidth));const a=new(s())(n,void 0,"le");return r.isSigned?a.fromTwos(8*r.byteWidth):a}(r,o,this)}var i,n,a;return new this(r)}static fromABI(t){return this.from(t.readArray(this.byteWidth))}static abiDefault(){return this.from(0)}static random(){return this.from(h(this.byteWidth))}cast(t,e="truncate"){return this.constructor===t?this:t.from(this,e)}get byteArray(){const t=this.constructor;return(t.isSigned?this.value.toTwos(8*t.byteWidth):this.value).toArrayLike(Uint8Array,"le",t.byteWidth)}equals(t,e=!1){const r=this.constructor;if(!0===e&&_(t,x)){const e=t.constructor;if(r.byteWidth!==e.byteWidth||r.isSigned!==e.isSigned)return!1}try{return this.value.eq(r.from(t).value)}catch{return!1}}add(t){this.value=this.operator(t,x.add).value}adding(t){return this.operator(t,x.add)}subtract(t){this.value=this.operator(t,x.sub).value}subtracting(t){return this.operator(t,x.sub)}multiply(t){this.value=this.operator(t,x.mul).value}multiplying(t){return this.operator(t,x.mul)}divide(t,e){this.value=this.dividing(t,e).value}dividing(t,e){let r=x.div;switch(e){case"ceil":r=x.divCeil;break;case"round":r=x.divRound}return this.operator(t,r)}operator(t,e){let r;return r=_(t,x)?t:I.from(t,"truncate"),e(this,r).cast(this.constructor)}toNumber(){return this.value.toNumber()}toString(){return this.value.toString()}[Symbol.toPrimitive](t){return"number"===t?this.toNumber():this.toString()}toABI(t){t.writeArray(this.byteArray)}toJSON(){return this.value.bitLength()>32?this.value.toString():this.value.toNumber()}}x.abiName="__int";class S extends x{}S.abiName="int8",S.byteWidth=1,S.isSigned=!0;class k extends x{}k.abiName="int16",k.byteWidth=2,k.isSigned=!0;class N extends x{}N.abiName="int32",N.byteWidth=4,N.isSigned=!0;class I extends x{}I.abiName="int64",I.byteWidth=8,I.isSigned=!0;class E extends x{}E.abiName="int128",E.byteWidth=16,E.isSigned=!0;class B extends x{}B.abiName="uint8",B.byteWidth=1,B.isSigned=!1;class U extends x{}U.abiName="uint16",U.byteWidth=2,U.isSigned=!1;class P extends x{}P.abiName="uint32",P.byteWidth=4,P.isSigned=!1;class V extends x{}V.abiName="uint64",V.byteWidth=8,V.isSigned=!1;class C extends x{}C.abiName="uint128",C.byteWidth=16,C.isSigned=!1;class W extends x{static fromABI(t){return new this(new(s())(t.readVarint32()))}toABI(t){t.writeVarint32(Number(this))}}W.abiName="varint32",W.byteWidth=32,W.isSigned=!0;class $ extends x{static fromABI(t){return new this(new(s())(t.readVaruint32()))}toABI(t){t.writeVaruint32(Number(this))}}function q(t){let e=t;return t.constructor.byteWidth<4&&(e=t.cast(N)),e}function j(t){const e=[],r=[],o=[],i=new Set,n=t=>{let e;return e="string"!==typeof t.type?a(t.type):t.type,!0===t.array&&(e+="[]"),!0===t.optional&&(e+="?"),!0===t.extension&&(e+="$"),e},a=t=>{if(!t.abiName)throw new Error("Encountered non-conforming type");if("__struct"===t.abiName)throw new Error("Misconfigured Struct subclass, did you forget @Struct.type?");if(i.has(t))return t.abiName;if(i.add(t),t.abiAlias)o.push({new_type_name:t.abiName,type:n(t.abiAlias)});else if(t.abiFields){const r=t.abiFields.map((t=>({name:t.name,type:n(t)}))),o={base:t.abiBase?a(t.abiBase):"",name:t.abiName,fields:r};e.push(o)}else if(t.abiVariant){const e={name:t.abiName,types:t.abiVariant.map(n)};r.push(e)}return t.abiName},s=a(t);return{abi:ht.from({structs:e,variants:r,types:o}),types:Array.from(i),root:s}}function D(t){let e="string"===typeof t.type?t.type:t.type.abiName;return!0===t.array&&(e+="[]"),!0===t.optional&&(e+="?"),!0===t.extension&&(e+="$"),e}function F(t){return"string"===typeof t||"undefined"!==typeof t.abiName?{type:t}:t}$.abiName="varuint32",$.byteWidth=32,$.isSigned=!1;const T={abiName:"string",abiDefault:()=>"",fromABI:t=>t.readString(),from:t=>t,toABI:(t,e)=>{e.writeString(t)}},O={abiName:"bool",abiDefault:()=>!1,fromABI:t=>1===t.readByte(),from:t=>t,toABI:(t,e)=>{e.writeByte(!0===t?1:0)}};function M(t=[]){const e={},r=[O,T,yt,yt.Symbol,yt.SymbolCode,ft,m,w,v,b,_t,ct,at,st,E,k,N,I,S,dt,At,kt,lt,pt,C,U,P,V,B,W,$];for(const o of r)e[o.abiName]=o;for(const o of t){if(!o.abiName)throw new Error("Invalid type");e[o.abiName]=o}return e}function R(t){if(t.constructor&&void 0!==t.constructor.abiName)return t.constructor.abiName;if(Array.isArray(t)){const e=t.map(R),r=e[0];if(!r||!e.every((t=>t===r)))return;return r+"[]"}switch(typeof t){case"boolean":return"bool";case"string":return"string"}}function L(t,e="jsobj"){var r;if(t.constructor&&void 0!==t.constructor.abiName)return t.constructor;if(Array.isArray(t)){const r=t.map((t=>L(t,e))),o=r[0];if(!o)return;if(!r.every((t=>t&&t.abiName===o.abiName)))return;return o}const o=typeof t;if("object"===o&&null!==t){const o=Object.keys(t).map((r=>({name:r,type:L(t[r],e+"_nested")})));if(o.find((t=>!t.type)))return;return(r=class extends rt{}).abiName=e,r.abiFields=o,r}switch(o){case"boolean":return O;case"string":return T}}class z extends Error{constructor(t,e){super(`Decoding error at ${t.codingPath.map((({field:t,type:e})=>"number"===typeof t?t:`${t}<${e.typeName}>`)).join(".")}: ${e.message}`),this.stack=e.stack,this.ctx=t,this.underlyingError=e}}function J(t){const e=F(t.type),r=D(e),o=t.customTypes||[];let i;if(t.abi)i=ht.from(t.abi);else try{let t;if("string"===typeof e.type){const r=M(o);if(t=r[new ht.ResolvedType(e.type).name],!t)throw new Error(`Unknown type: ${e.type}`)}else t=e.type;const r=j(t);i=r.abi,o.push(...r.types)}catch(s){throw Error(`Unable to synthesize ABI for: ${r} (${s.message}). To decode non-class types you need to pass the ABI definition manually.`)}const n=i.resolveType(r);"string"!==typeof e.type&&o.unshift(e.type);const a={types:M(o),strictExtensions:t.strictExtensions||!1,codingPath:[{field:"root",type:n}]};try{if(t.data){let e;if(_(t.data,Y))e=t.data;else{const r=m.from(t.data);e=new Y(r.array)}return t.metadata&&(e.metadata=t.metadata),H(n,e,a)}if(void 0!==t.object)return Z(t.object,n,a);if(t.json)return Z(JSON.parse(t.json),n,a);throw new Error("Nothing to decode, you must set one of data, json, object")}catch(s){throw new z(a,s)}}z.__className="DecodingError";const K=Symbol("Resolved");function H(t,e,r){if(r.codingPath.length>32)throw new Error("Maximum decoding depth exceeded");if(t.isExtension&&!e.canRead())return r.strictExtensions?G(t,r):null;if(t.isOptional&&0===e.readByte())return null;if(t.isArray){const i=e.readVaruint32(),n=[];for(let e=0;e<i;e++)r.codingPath.push({field:e,type:t}),n.push(o()),r.codingPath.pop();return n}return o();function o(){const o=r.types[t.name];if(o&&o.fromABI)return o.fromABI(e);if(t.ref){r.codingPath.push({field:"",type:t.ref});const o=H(t.ref,e,r);return r.codingPath.pop(),o}if(t.fields){const i=t.allFields;if(!i)throw new Error("Invalid struct fields");const n={};for(const t of i)r.codingPath.push({field:t.name,type:t.type}),n[t.name]=H(t.type,e,r),r.codingPath.pop();return o?(n[K]=!0,o.from(n)):n}if(t.variant){const i=e.readByte(),n=t.variant[i];if(!n)throw new Error(`Unknown variant idx: ${i}`);r.codingPath.push({field:`v${i}`,type:n});const a=[n.typeName,H(n,e,r)];return r.codingPath.pop(),o?o.from(a):a}throw o?new Error("Invalid type"):new Error("any"===t.name?"Unable to decode 'any' type from binary":"Unknown type")}}function Z(t,e,r){if(null===t||void 0===t){if(e.isOptional)return null;if(e.isExtension)return r.strictExtensions?G(e,r):null;throw new Error(`Unexpectedly encountered ${t} for non-optional`)}if(e.isArray){if(!Array.isArray(t))throw new Error("Expected array");const i=[],n=t.length;for(let a=0;a<n;a++)r.codingPath.push({field:a,type:e}),i.push(o(t[a])),r.codingPath.pop();return i}return o(t);function o(t){const o=r.types[e.name];if(e.ref&&!o)return Z(t,e.ref,r);if(e.fields){if("object"!==typeof t)throw new Error("Expected object");if("function"===typeof o&&_(t,o))return t;const i=e.allFields;if(!i)throw new Error("Invalid struct fields");const n={};for(const e of i)r.codingPath.push({field:e.name,type:e.type}),n[e.name]=Z(t[e.name],e.type,r),r.codingPath.pop();return o?(n[K]=!0,o.from(n)):n}if(e.variant){let i;Array.isArray(t)&&2===t.length&&"string"===typeof t[0]?(i=t[0],t=t[1]):_(t,it)?(i=t.variantName,t=t.value):i=R(t);const n=e.variant.findIndex((t=>t.typeName===i));if(-1===n)throw new Error(`Unknown variant type: ${i}`);const a=e.variant[n];r.codingPath.push({field:`v${n}`,type:a});const s=[a.typeName,Z(t,a,r)];return r.codingPath.pop(),o?(s[K]=!0,o.from(s)):s}if(!o){if("any"===e.name)return t;throw new Error("Unknown type")}return o.from(t)}}function G(t,e,r=new Set){if(t.isArray)return[];if(t.isOptional)return null;const o=e.types[t.name];if(o&&o.abiDefault)return o.abiDefault();if(r.has(t.name))throw new Error("Circular type reference");if(r.add(t.name),t.allFields){const i={};for(const o of t.allFields)e.codingPath.push({field:o.name,type:o.type}),i[o.name]=G(o.type,e,r),e.codingPath.pop();return o?(i[K]=!0,o.from(i)):i}if(t.variant&&t.variant.length>0){const r=[t.variant[0].typeName,G(t.variant[0],e)];return o?(r[K]=!0,o.from(r)):r}if(t.ref){e.codingPath.push({field:"",type:t.ref});const o=G(t.ref,e,r);return e.codingPath.pop(),o}throw new Error("Unable to determine default value")}class Y{constructor(t){this.array=t,this.pos=0,this.textDecoder=new TextDecoder("utf-8",{fatal:!0}),this.metadata={},this.data=new DataView(t.buffer,t.byteOffset,t.byteLength)}canRead(t=1){return!(this.pos+t>this.array.byteLength)}ensure(t){if(!this.canRead(t))throw new Error("Read past end of buffer")}setPosition(t){if(t<0||t>this.array.byteLength)throw new Error("Invalid position");this.pos=t}getPosition(){return this.pos}advance(t){this.ensure(t),this.pos+=t}readByte(){return this.ensure(1),this.array[this.pos++]}readFloat(t){let e;switch(this.ensure(t),t){case 4:e=this.data.getFloat32(this.pos,!0);break;case 8:e=this.data.getFloat64(this.pos,!0);break;default:throw new Error("Invalid float size")}return this.pos+=t,e}readVaruint32(){let t=0,e=0;for(;;){const r=this.readByte();if(t|=(127&r)<<e,e+=7,!(128&r))break}return t>>>0}readVarint32(){const t=this.readVaruint32();return 1&t?~t>>1|2147483648:t>>>1}readArray(t){this.ensure(t);const e=this.array.subarray(this.pos,this.pos+t);return this.pos+=t,e}readString(){const t=this.readVaruint32();return this.textDecoder.decode(this.readArray(t))}}Y.__className="ABIDecoder";class Q extends Error{constructor(t,e){super(`Encoding error at ${t.codingPath.map((({field:t,type:e})=>"number"===typeof t?t:`${t}<${e.typeName}>`)).join(".")}: ${e.message}`),this.stack=e.stack,this.ctx=t,this.underlyingError=e}}function X(t){let e,r;"string"===typeof t.type?r=t.type:t.type&&function(t){return"string"!==typeof t&&void 0===t.abiName&&void 0!==t.type}(t.type)?("string"!==typeof t.type.type&&(e=t.type.type),r=D(t.type)):t.type&&void 0!==t.type.abiName?(e=t.type,r=t.type.abiName):(e=L(t.object),e&&(r=e.abiName,Array.isArray(t.object)&&(r+="[]")));const o=t.customTypes?t.customTypes.slice():[];if(e)o.unshift(e);else if(r){const t=new ht.ResolvedType(r).name;e=o.find((e=>e.abiName===t))}let i;if(t.abi&&r)i=ht.from(t.abi).resolveType(r);else if(e){const t=j(e);i=t.abi.resolveType(r||e.abiName),o.push(...t.types)}else{if(!r)throw new Error("Unable to determine the type of the object to be encoded. To encode custom ABI types you must pass the type argument.");i=new ht.ResolvedType(r)}const n=M(o),a=t.encoder||new et;t.metadata&&(a.metadata=t.metadata);const s={types:n,encoder:a,codingPath:[{field:"root",type:i}]};try{tt(t.object,i,s)}catch(c){throw new Q(s,c)}return m.from(a.getData())}function tt(t,e,r){const o=void 0!==t&&null!==t;if(!e.isOptional||(r.encoder.writeByte(o?1:0),o))if(e.isArray){if(!Array.isArray(t))throw new Error(`Expected array for: ${e.typeName}`);const o=t.length;r.encoder.writeVaruint32(o);for(let n=0;n<o;n++)r.codingPath.push({field:n,type:e}),i(t[n]),r.codingPath.pop()}else i(t);function i(t){const i=r.types[e.name];if(!e.ref||i){if(!o){if(e.isExtension)return;throw new Error(`Found ${t} for non-optional type: ${e.typeName}`)}if(i&&i.toABI)i.toABI(t,r.encoder);else if("function"===typeof t.toABI&&t.constructor.abiName===e.name)t.toABI(r.encoder);else if(e.fields){if("object"!==typeof t)throw new Error(`Expected object for: ${e.name}`);const o=e.allFields;if(!o)throw new Error("Invalid struct fields");for(const e of o)r.codingPath.push({field:e.name,type:e.type}),tt(t[e.name],e.type,r),r.codingPath.pop()}else if(e.variant){let o;Array.isArray(t)&&2===t.length&&"string"===typeof t[0]?(o=t[0],t=t[1]):_(t,it)?(o=t.variantName,t=t.value):o=R(t);const i=e.variant.findIndex((t=>t.typeName===o));if(-1===i){const t=e.variant.map((t=>`'${t.typeName}'`)).join(", ");throw new Error(`Unknown variant type '${o}', expected one of ${t}`)}const n=e.variant[i];r.encoder.writeVaruint32(i),r.codingPath.push({field:`v${i}`,type:n}),tt(t,n,r),r.codingPath.pop()}else{if(!i)throw new Error("any"===e.name?"Unable to encode any type to binary":"Unknown type");const o=i.from(t);if(!o.toABI)throw new Error(`Invalid type ${e.name}, no encoding methods implemented`);o.toABI(r.encoder)}}else tt(t,e.ref,r)}}Q.__className="EncodingError";class et{constructor(t=1024){this.pageSize=t,this.pos=0,this.textEncoder=new TextEncoder,this.metadata={};const e=new ArrayBuffer(t);this.data=new DataView(e),this.array=new Uint8Array(e)}ensure(t){if(this.data.byteLength>=this.pos+t)return;const e=Math.ceil(t/this.pageSize),r=this.data.byteLength+this.pageSize*e,o=new ArrayBuffer(r),i=new DataView(o),n=new Uint8Array(o);n.set(this.array),this.data=i,this.array=n}writeByte(t){this.ensure(1),this.array[this.pos++]=t}writeArray(t){const e=t.length;this.ensure(e),this.array.set(t,this.pos),this.pos+=e}writeFloat(t,e){switch(this.ensure(e),e){case 4:this.data.setFloat32(this.pos,t,!0);break;case 8:this.data.setFloat64(this.pos,t,!0);break;default:throw new Error("Invalid float size")}this.pos+=e}writeVaruint32(t){for(this.ensure(4);;){if(!(t>>>7)){this.array[this.pos++]=t;break}this.array[this.pos++]=128|127&t,t>>>=7}}writeVarint32(t){this.writeVaruint32(t<<1^t>>31)}writeString(t){const e=this.textEncoder.encode(t);this.writeVaruint32(e.byteLength),this.writeArray(e)}getData(){return new Uint8Array(this.array.buffer,this.array.byteOffset,this.pos)}getBytes(){return new m(this.getData())}}et.__className="ABIEncoder";class rt{constructor(t){const e=this.constructor;for(const r of e.structFields)this[r.name]=t[r.name]}static from(t){return!0===t[K]?new this(t):_(t,this)?t:J({object:t,type:this})}static get structFields(){const t=[],e=r=>{r.abiBase&&e(r.abiBase);for(const e of r.abiFields||[])t.push(e)};return e(this),t}equals(t){const e=this.constructor;return(!t.constructor||"string"!==typeof t.constructor.abiName||t.constructor.abiName===e.abiName)&&X({object:this}).equals(X({object:e.from(t)}))}toJSON(){const t=this.constructor,e={};for(const r of t.structFields)e[r.name]=this[r.name];return e}}function ot(t){return function(e){return e.abiAlias={type:Object.getPrototypeOf(e.prototype).constructor},e.abiName=t,e}}rt.abiName="__struct",function(t){const e=Symbol("FieldsOwner");t.type=function(t){return function(e){return e.abiName=t,e}},t.field=function(t,r){return r||(r={}),(o,i)=>{const n=o.constructor;n.abiFields?n.abiFields[e]!==n&&(n.abiBase=n.abiFields[e],n.abiFields=[],n.abiFields[e]=n):(n.abiFields=[],n.abiFields[e]=n),n.abiFields.push({...r,name:i,type:t})}}}(rt||(rt={}));class it{constructor(t){const e=this.constructor.abiVariant;this.value=t[1];const r=e.map(D).findIndex((e=>e===t[0]));if(0>r||e.length<=r)throw new Error(`Unknown variant ${t[0]}`);this.variantIdx=r}static from(t){return t[K]?new this(t):_(t,this)?t:J({object:t,type:this})}equals(t){const e=this.constructor.from(t);return this.variantIdx===e.variantIdx&&X({object:this}).equals(X({object:e}))}get variantName(){return D(this.constructor.abiVariant[this.variantIdx])}toJSON(){return[this.variantName,this.value]}}it.abiName="__variant",it.abiVariant=[],function(t){t.type=function(t,e){return function(r){return r.abiName=t,r.abiVariant=e.map(F),r}}}(it||(it={}));class nt{constructor(t){if(!Number.isFinite(t))throw new Error("Invalid number");this.value=t}static from(t){return _(t,this)?t:("string"===typeof t?t=Number.parseFloat(t):_(t,nt)&&(t=t.value),new this(t))}static fromABI(t){return new this(t.readFloat(this.byteWidth))}static abiDefault(){return this.from(0)}static random(){const t=h(this.byteWidth),e=new Y(t);return this.fromABI(e)}equals(t){const e=this.constructor;return this.value===e.from(t).value}toABI(t){const e=this.constructor;t.writeFloat(this.value,e.byteWidth)}toString(){return this.value.toString()}toJSON(){return this.toString()}}nt.abiName="__float";class at extends nt{toString(){return this.value.toFixed(7)}}at.abiName="float32",at.byteWidth=4;class st extends nt{}st.abiName="float64",st.byteWidth=8;class ct{constructor(t){if(16!==t.array.length)throw new Error("Invalid float128");this.data=t}static from(t){return _(t,this)?t:("string"===typeof t&&t.startsWith("0x")&&(t=t.slice(2)),new this(m.from(t)))}static fromABI(t){return new this(new m(t.readArray(this.byteWidth)))}static random(){const t=h(16),e=new Y(t);return this.fromABI(e)}equals(t){const e=this.constructor;return this.data.equals(e.from(t).data)}toABI(t){t.writeArray(this.data.array)}toString(){return"0x"+this.data.hexString}toJSON(){return this.toString()}}ct.abiName="float128",ct.byteWidth=16;class dt{constructor(t){this.value=t}get rawValue(){return this.value}static from(t){if(_(t,dt))return t;if("string"===typeof t)return new dt(function(t){function e(t){return t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)?t-"a".charCodeAt(0)+6:t>="1".charCodeAt(0)&&t<="5".charCodeAt(0)?t-"1".charCodeAt(0)+1:0}const r=new Uint8Array(8);let o=63;for(let i=0;i<t.length;++i){let n=e(t.charCodeAt(i));o<5&&(n<<=1);for(let t=4;t>=0;--t)o>=0&&(r[Math.floor(o/8)]|=(n>>t&1)<<o%8,--o)}return V.from(r)}(t));if(_(t,V))return new dt(t);throw new Error("Invalid name")}static fromABI(t){return new dt(V.fromABI(t))}static abiDefault(){return new this(V.from(0))}equals(t){return this.value.equals(dt.from(t).value)}toString(){return function(t){const e=t.value.toArray("le",8);let r="";for(let o=63;o>=0;){let t=0;for(let r=0;r<5;++r)o>=0&&(t=t<<1|e[Math.floor(o/8)]>>o%8&1,--o);r+=t>=6?String.fromCharCode(t+"a".charCodeAt(0)-6):t>=1?String.fromCharCode(t+"1".charCodeAt(0)-1):"."}for(;r.endsWith(".");)r=r.substr(0,r.length-1);return r}(this.value)}toABI(t){this.value.toABI(t)}toJSON(){return this.toString()}}dt.abiName="name",dt.pattern=/^[a-z1-5.]{0,13}$/;class ut{static from(t){return _(t,this)?t:_(t,ut)?this.fromMilliseconds(t.toMilliseconds()):_(t,Date)?this.fromDate(t):"string"===typeof t?this.fromString(t):this.fromInteger(t)}static fromString(t){const e=Date.parse(t+"Z");if(!Number.isFinite(e))throw new Error("Invalid date string");return this.fromMilliseconds(e)}static fromDate(t){return this.fromMilliseconds(t.getTime())}static abiDefault(){return this.from(0)}toABI(t){this.value.toABI(t)}equals(t){const e=this.constructor;return this.toMilliseconds()===e.from(t).toMilliseconds()}toMilliseconds(){throw new Error("Not implemented")}toDate(){return new Date(this.toMilliseconds())}toJSON(){return this.toString()}}ut.abiName="__time_point_base";class lt extends ut{constructor(t){super(),this.value=t}static fromMilliseconds(t){return new this(I.from(Math.round(1e3*t)))}static fromInteger(t){return new this(I.from(t))}static fromABI(t){return new this(I.fromABI(t))}toString(){return this.toDate().toISOString().slice(0,-1)}toMilliseconds(){return Number(this.value.dividing(1e3,"round"))}}lt.abiName="time_point";class pt extends ut{constructor(t){super(),this.value=t}static fromMilliseconds(t){return new this(P.from(Math.round(t/1e3)))}static fromInteger(t){return new this(P.from(t))}static fromABI(t){return new this(P.fromABI(t))}toString(){return this.toDate().toISOString().slice(0,-5)}toMilliseconds(){return Number(this.value.cast(V).multiplying(1e3))}}pt.abiName="time_point_sec";class ft extends ut{constructor(t){super(),this.value=t}static fromMilliseconds(t){return new this(P.from(Math.round((t-9466848e5)/500)))}static fromInteger(t){return new this(P.from(t))}static fromABI(t){return new this(P.fromABI(t))}toString(){return this.toDate().toISOString().slice(0,-1)}toMilliseconds(){return Number(this.value.cast(V).multiplying(500).adding(9466848e5))}}ft.abiName="block_timestamp_type";class ht{constructor(t){this.version=t.version||ht.version,this.types=t.types||[],this.variants=t.variants||[],this.structs=t.structs||[],this.actions=t.actions||[],this.tables=t.tables||[],this.ricardian_clauses=t.ricardian_clauses||[]}static from(t){return _(t,ht)?t:new ht("string"===typeof t?JSON.parse(t):t)}static fromABI(t){const e=t.readString(),r=[],o=t.readVaruint32();for(let y=0;y<o;y++)r.push({new_type_name:t.readString(),type:t.readString()});const i=[],n=t.readVaruint32();for(let y=0;y<n;y++){const e=t.readString(),r=t.readString(),o=t.readVaruint32(),n=[];for(let i=0;i<o;i++)n.push({name:t.readString(),type:t.readString()});i.push({base:r,name:e,fields:n})}const a=[],s=t.readVaruint32();for(let y=0;y<s;y++){const e=dt.fromABI(t),r=t.readString(),o=t.readString();a.push({name:e,type:r,ricardian_contract:o})}const c=[],d=t.readVaruint32();for(let y=0;y<d;y++){const e=dt.fromABI(t),r=t.readString(),o=[],i=t.readVaruint32();for(let c=0;c<i;c++)o.push(t.readString());const n=[],a=t.readVaruint32();for(let c=0;c<a;c++)n.push(t.readString());const s=t.readString();c.push({name:e,index_type:r,key_names:o,key_types:n,type:s})}const u=[],l=t.readVaruint32();for(let y=0;y<l;y++){const e=t.readString(),r=t.readString();u.push({id:e,body:r})}const p=t.readVaruint32();for(let y=0;y<p;y++)t.advance(8),t.advance(t.readVaruint32());const f=t.readVaruint32();for(let y=0;y<f;y++)t.advance(2),t.advance(t.readVaruint32());const h=[];if(t.canRead()){const e=t.readVaruint32();for(let r=0;r<e;r++){const e=t.readString(),r=[],o=t.readVaruint32();for(let i=0;i<o;i++)r.push(t.readString());h.push({name:e,types:r})}}return new ht({version:e,types:r,structs:i,actions:a,tables:c,ricardian_clauses:u,variants:h})}toABI(t){t.writeString(this.version),t.writeVaruint32(this.types.length);for(const e of this.types)t.writeString(e.new_type_name),t.writeString(e.type);t.writeVaruint32(this.structs.length);for(const e of this.structs){t.writeString(e.name),t.writeString(e.base),t.writeVaruint32(e.fields.length);for(const r of e.fields)t.writeString(r.name),t.writeString(r.type)}t.writeVaruint32(this.actions.length);for(const e of this.actions)dt.from(e.name).toABI(t),t.writeString(e.type),t.writeString(e.ricardian_contract);t.writeVaruint32(this.tables.length);for(const e of this.tables){dt.from(e.name).toABI(t),t.writeString(e.index_type),t.writeVaruint32(e.key_names.length);for(const r of e.key_names)t.writeString(r);t.writeVaruint32(e.key_types.length);for(const r of e.key_types)t.writeString(r);t.writeString(e.type)}t.writeVaruint32(this.ricardian_clauses.length);for(const e of this.ricardian_clauses)t.writeString(e.id),t.writeString(e.body);t.writeVaruint32(0),t.writeVaruint32(0),t.writeVaruint32(this.variants.length);for(const e of this.variants){t.writeString(e.name),t.writeVaruint32(e.types.length);for(const r of e.types)t.writeString(r)}}resolveType(t){return this.resolve({name:t,types:{}},{id:0})}resolveAll(){const t={},e={id:0};return{types:this.types.map((r=>this.resolve({name:r.new_type_name,types:t},e))),variants:this.variants.map((r=>this.resolve({name:r.name,types:t},e))),structs:this.structs.map((r=>this.resolve({name:r.name,types:t},e)))}}resolve({name:t,types:e},r){const o=e[t];if(o)return o;const i=new ht.ResolvedType(t,++r.id);e[i.typeName]=i;const n=this.types.find((t=>t.new_type_name==i.name));if(n)return i.ref=this.resolve({name:n.type,types:e},r),i;const a=this.getStruct(i.name);if(a)return a.base&&(i.base=this.resolve({name:a.base,types:e},r)),i.fields=a.fields.map((t=>({name:t.name,type:this.resolve({name:t.type,types:e},r)}))),i;const s=this.getVariant(i.name);return s?(i.variant=s.types.map((t=>this.resolve({name:t,types:e},r))),i):i}getStruct(t){return this.structs.find((e=>e.name==t))}getVariant(t){return this.variants.find((e=>e.name==t))}getActionType(t){const e=dt.from(t).toString(),r=this.actions.find((t=>t.name.toString()===e));if(r)return r.type}equals(t){const e=ht.from(t);return this.version==e.version&&this.types.length==e.types.length&&this.structs.length==e.structs.length&&this.actions.length==e.actions.length&&this.tables.length==e.tables.length&&this.ricardian_clauses.length==e.ricardian_clauses.length&&this.variants.length==e.variants.length&&X({object:this}).equals(X({object:e}))}toJSON(){return{version:this.version,types:this.types,structs:this.structs,actions:this.actions,tables:this.tables,ricardian_clauses:this.ricardian_clauses,error_messages:[],abi_extensions:[],variants:this.variants}}}ht.abiName="abi",ht.version="eosio::abi/1.1",function(t){t.ResolvedType=class{constructor(t,e=0){let r=t;r.endsWith("$")?(r=r.slice(0,-1),this.isExtension=!0):this.isExtension=!1,r.endsWith("?")?(r=r.slice(0,-1),this.isOptional=!0):this.isOptional=!1,r.endsWith("[]")?(r=r.slice(0,-2),this.isArray=!0):this.isArray=!1,this.id=e,this.name=r}get typeName(){let t=this.name;return this.isArray&&(t+="[]"),this.isOptional&&(t+="?"),this.isExtension&&(t+="$"),t}get allFields(){let t=this;const e=[],r=new Set;do{if(!t.fields)return;if(r.has(t.name))return;for(let r=t.fields.length-1;r>=0;r--)e.unshift(t.fields[r]);r.add(t.name),t=t.base}while(void 0!==t);return e}}}(ht||(ht={}));class yt{constructor(t,e){this.units=t,this.symbol=e}static from(t,e){if(_(t,yt))return t;switch(typeof t){case"number":if(!e)throw new Error("Symbol is required when creating Asset from number");return this.fromFloat(t,e);case"string":return this.fromString(t);default:throw new Error("Invalid asset")}}static fromString(t){const e=("string"===typeof t?t:"").split(" ");if(2!==e.length)throw new Error("Invalid asset string");const r=e[0].replace(".",""),o=(e[0].split(".")[1]||"").length,i=yt.Symbol.fromParts(e[1],o);return new yt(I.from(r),i)}static fromFloat(t,e){const r=yt.Symbol.from(e);return new yt(r.convertFloat(t),r)}static fromUnits(t,e){return new yt(I.from(t),yt.Symbol.from(e))}static fromABI(t){const e=I.fromABI(t),r=yt.Symbol.fromABI(t);return new yt(e,r)}static abiDefault(){return new this(I.from(0),yt.Symbol.abiDefault())}equals(t){const{symbol:e,units:r}=yt.from(t);return this.symbol.value.equals(e.value)&&this.units.equals(r)}get value(){return this.symbol.convertUnits(this.units)}set value(t){this.units=this.symbol.convertFloat(t)}toABI(t){this.units.toABI(t),this.symbol.toABI(t)}toString(){const t=this.units.toString().split("");let e=!1;"-"===t[0]&&(e=!0,t.shift());const r=this.symbol.precision;for(;t.length<=r;)t.unshift("0");r>0&&t.splice(t.length-r,0,".");let o=t.join("");return e&&(o="-"+o),o+" "+this.symbol.name}toJSON(){return this.toString()}}yt.abiName="asset",function(t){class e{constructor(t){if(mt(t)>e.maxPrecision)throw new Error("Invalid asset symbol, precision too large");if(!e.symbolNamePattern.test(gt(t)))throw new Error("Invalid asset symbol, name must be uppercase A-Z");this.value=t}static from(t){if(_(t,e))return t;if(_(t,V))return new e(t);const r=t.split(",");if(2!==r.length)throw new Error("Invalid symbol string");const o=Number.parseInt(r[0]);return e.fromParts(r[1],o)}static fromParts(t,r){return new e(function(t,e){const r=bt(t),o=new Uint8Array(r.length+1);return o[0]=e,o.set(r,1),V.from(o)}(t,r))}static fromABI(t){return new e(V.fromABI(t))}static abiDefault(){return this.from("4,SYS")}equals(t){return this.value.equals(e.from(t).value)}get name(){return gt(this.value)}get precision(){return mt(this.value)}get code(){return new r(V.from(this.value.value.clone().iushrn(8)))}toABI(t){this.value.toABI(t)}convertUnits(t){return t.value.toNumber()/Math.pow(10,this.precision)}convertFloat(t){return I.from(t.toFixed(this.precision).replace(".",""))}toString(){return`${this.precision},${this.name}`}toJSON(){return this.toString()}}e.abiName="symbol",e.symbolNamePattern=/^[A-Z]{1,7}$/,e.maxPrecision=18,t.Symbol=e;class r{constructor(t){this.value=t}static from(t){return _(t,r)?t:("string"===typeof t&&(t=V.from(bt(t))),new this(V.from(t)))}static fromABI(t){return new r(V.fromABI(t))}static abiDefault(){return this.from("SYS")}equals(t){return this.value.equals(r.from(t).value)}toABI(t){this.value.toABI(t)}toString(){return vt(this.value.value.toArray("be"))}toJSON(){return this.toString()}}r.abiName="symbol_code",t.SymbolCode=r}(yt||(yt={}));class _t{constructor(t,e){this.quantity=t,this.contract=e}static from(t){return _(t,_t)?t:new this(yt.from(t.quantity),dt.from(t.contract))}static fromABI(t){return new _t(yt.fromABI(t),dt.fromABI(t))}equals(t){return this.quantity.equals(t.quantity)&&this.contract.equals(t.contract)}toABI(t){this.quantity.toABI(t),this.contract.toABI(t)}toJSON(){return{quantity:this.quantity,contract:this.contract}}}function mt(t){return t.value.and(V.from(255).value).toNumber()}function gt(t){return vt(t.value.toArray("be").slice(0,-1))}function vt(t){return t.map((t=>String.fromCharCode(t))).reverse().join("")}function bt(t){const e=Math.min(t.length,7),r=new Uint8Array(e);for(let o=0;o<e;o++)r[o]=t.charCodeAt(o);return r}var wt;_t.abiName="extended_asset",function(t){let e;!function(t){t.E_CHECKSUM="E_CHECKSUM",t.E_INVALID="E_INVALID"}(e=t.ErrorCode||(t.ErrorCode={}));class r extends Error{constructor(t,e,r={}){super(t),this.code=e,this.info=r}}r.__className="DecodingError",t.DecodingError=r;const o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",i=new Int16Array(255).fill(-1);for(let n=0;n<58;++n)i[o.charCodeAt(n)]=n;function a(t,o){if(null==o)return function(t){const o=[];for(let n=0;n<t.length;++n){let a=i[t.charCodeAt(n)];if(a<0)throw new r("Invalid Base58 character encountered",e.E_INVALID,{char:t[n]});for(let t=0;t<o.length;++t){const e=58*o[t]+a;o[t]=255&e,a=e>>8}a&&o.push(a)}for(const e of t){if("1"!==e)break;o.push(0)}return o.reverse(),m.from(o)}(t);const n=new Uint8Array(o);for(let a=0;a<t.length;++a){let s=i[t.charCodeAt(a)];if(s<0)throw new r("Invalid Base58 character encountered",e.E_INVALID,{char:t[a]});for(let t=0;t<o;++t){const e=58*n[t]+s;n[t]=e,s=e>>8}if(s)throw new r("Base58 value is out of range",e.E_INVALID)}return n.reverse(),new m(n)}function s(t){t=m.from(t);const e=[];for(const r of t.array){let t=r;for(let r=0;r<e.length;++r){const n=(i[e[r]]<<8)+t;e[r]=o.charCodeAt(n%58),t=n/58|0}for(;t;)e.push(o.charCodeAt(t%58)),t=t/58|0}for(const r of t.array){if(r)break;e.push("1".charCodeAt(0))}return e.reverse(),String.fromCharCode(...e)}function c(t,e){const r=(0,n.ripemd160)().update(t);return e&&r.update(e),new Uint8Array(r.digest().slice(0,4))}function d(t){const e=(0,n.sha256)().update(t).digest(),r=(0,n.sha256)().update(e).digest();return new Uint8Array(r.slice(0,4))}t.decode=a,t.decodeCheck=function(t,o){const i=a(t,null!=o?o+4:o),n=i.array.subarray(0,-4),s=i.array.subarray(-4),c=d(n);if(!u(s,c))throw new r("Checksum mismatch",e.E_CHECKSUM,{actual:c,expected:s,data:n,hash:"double_sha256"});return new m(n)},t.decodeRipemd160Check=function(t,o,i){const n=a(t,null!=o?o+4:o),s=n.array.subarray(0,-4),d=n.array.subarray(-4),l=c(s,i);if(!u(d,l))throw new r("Checksum mismatch",e.E_CHECKSUM,{actual:l,expected:d,data:s,hash:"ripemd160"});return new m(s)},t.encode=s,t.encodeCheck=function(t){return s(t=(t=m.from(t)).appending(d(t.array)))},t.encodeRipemd160Check=function(t,e){return s(t=(t=m.from(t)).appending(c(t.array,e)))}}(wt||(wt={}));class At{constructor(t,e){this.type=t,this.data=e}static from(t){if(_(t,At))return t;if("object"===typeof t&&t.type&&t.compressed)return new At(A.from(t.type),new m(t.compressed));if("string"!==typeof t)throw new Error("Invalid public key");if(t.startsWith("PUB_")){const e=t.split("_");if(3!==e.length)throw new Error("Invalid public key string");const r=A.from(e[1]),o=r===A.K1||r===A.R1?33:void 0,i=wt.decodeRipemd160Check(e[2],o,r);return new At(r,i)}if(t.length>=50){const e=wt.decodeRipemd160Check(t.slice(-50));return new At(A.K1,e)}throw new Error("Invalid public key string")}static fromABI(t){const e=A.from(t.readByte());if(e==A.WA){const e=t.getPosition();t.advance(33),t.advance(1),t.advance(t.readVaruint32());const r=t.getPosition()-e;t.setPosition(e);const o=m.from(t.readArray(r));return new At(A.WA,o)}return new At(e,new m(t.readArray(33)))}equals(t){const e=At.from(t);return this.type===e.type&&this.data.equals(e.data)}toLegacyString(t="EOS"){if(this.type!==A.K1)throw new Error("Unable to create legacy formatted string for non-K1 key");return`${t}${wt.encodeRipemd160Check(this.data)}`}toString(){return`PUB_${this.type}_${wt.encodeRipemd160Check(this.data,this.type)}`}toABI(t){t.writeByte(A.indexFor(this.type)),t.writeArray(this.data.array)}toJSON(){return this.toString()}}At.abiName="public_key";const xt={};function St(t){let e=xt[t];if(!e)if("K1"===t)e=xt[t]=new c.ec("secp256k1");else{if("R1"!==t)throw new Error(`Unknown curve type: ${t}`);e=xt[t]=new c.ec("p256")}return e}class kt{constructor(t,e){this.type=t,this.data=e}static from(t){if(_(t,kt))return t;if("object"===typeof t&&t.r&&t.s){const e=new Uint8Array(65);let r=t.recid;const o=A.from(t.type);return t.type!==A.K1&&t.type!==A.R1||(r+=31),e[0]=r,e.set(t.r,1),e.set(t.s,33),new kt(o,new m(e))}if("string"!==typeof t)throw new Error("Invalid signature");if(t.startsWith("SIG_")){const e=t.split("_");if(3!==e.length)throw new Error("Invalid signature string");const r=A.from(e[1]),o=r===A.K1||r===A.R1?65:void 0,i=wt.decodeRipemd160Check(e[2],o,r);return new kt(r,i)}throw new Error("Invalid signature string")}static fromABI(t){const e=A.from(t.readByte());if(e===A.WA){const e=t.getPosition();t.advance(65),t.advance(t.readVaruint32()),t.advance(t.readVaruint32());const r=t.getPosition()-e;t.setPosition(e);const o=m.from(t.readArray(r));return new kt(A.WA,o)}return new kt(e,new m(t.readArray(65)))}equals(t){const e=kt.from(t);return this.type===e.type&&this.data.equals(e.data)}recoverDigest(t){t=v.from(t);const e=function(t,e,r){const o=St(r),i=t[0]-31,n=t.subarray(1,33),a=t.subarray(33),s=o.recoverPubKey(e,{r:n,s:a},i);return new Uint8Array(s.encodeCompressed())}(this.data.array,t.array,this.type);return At.from({compressed:e,type:this.type})}recoverMessage(t){return this.recoverDigest(v.hash(t))}verifyDigest(t,e){return t=v.from(t),function(t,e,r,o){const i=St(o),n=t.subarray(1,33),a=t.subarray(33);return i.verify(e,{r:n,s:a},r)}(this.data.array,t.array,e.data.array,this.type)}verifyMessage(t,e){return this.verifyDigest(v.hash(t),e)}toString(){return`SIG_${this.type}_${wt.encodeRipemd160Check(this.data,this.type)}`}toABI(t){t.writeByte(A.indexFor(this.type)),t.writeArray(this.data.array)}toJSON(){return this.toString()}}function Nt(t,e){return!(128&t[0])&&!(0===t[0]&&!(128&t[1]))&&!(128&e[0])&&!(0===e[0]&&!(128&e[1]))}kt.abiName="signature";class It{constructor(t,e){if((t===A.K1||t===A.R1)&&32!==e.length)throw new Error("Invalid private key length");this.type=t,this.data=e}static from(t){return _(t,It)?t:this.fromString(t)}static fromString(t,e=!1){try{const{type:e,data:r}=function(t){const e=typeof t;if("string"!==e)throw new Error(`Expected string, got ${e}`);if(t.startsWith("PVT_")){const e=t.split("_");if(3!==e.length)throw new Error("Invalid PVT format");const r=A.from(e[1]);let o;switch(r){case A.K1:case A.R1:o=32}return{type:r,data:wt.decodeRipemd160Check(e[2],o,r)}}{const e=A.K1,r=wt.decodeCheck(t);if(128!==r.array[0])throw new Error("Invalid WIF");return{type:e,data:r.droppingFirst()}}}(t);return new this(e,r)}catch(r){if(r.message=`Invalid private key (${r.message})`,e&&_(r,wt.DecodingError)&&r.code===wt.ErrorCode.E_CHECKSUM){const e=t.startsWith("PVT_R1")?A.R1:A.K1,o=new m(r.info.data);return 33===o.length&&o.dropFirst(),o.zeropad(32,!0),new this(e,o)}throw r}}static generate(t){return new It(A.from(t),new m(function(t){return St(t).genKeyPair().getPrivate().toArrayLike(Uint8Array,"be",32)}(t)))}signDigest(t){return t=v.from(t),kt.from(function(t,e,r){const o=St(r).keyFromPrivate(t);let i,n,a;if("K1"===r){let t=1;do{i=o.sign(e,{canonical:!0,pers:[t++]}),n=i.r.toArrayLike(Uint8Array,"be",32),a=i.s.toArrayLike(Uint8Array,"be",32)}while(!Nt(n,a))}else i=o.sign(e,{canonical:!0}),n=i.r.toArrayLike(Uint8Array,"be",32),a=i.s.toArrayLike(Uint8Array,"be",32);return{type:r,r:n,s:a,recid:i.recoveryParam||0}}(this.data.array,t.array,this.type))}signMessage(t){return this.signDigest(v.hash(t))}sharedSecret(t){const e=function(t,e,r){const o=St(r),i=o.keyFromPrivate(t),n=o.keyFromPublic(e).getPublic();return i.derive(n).toArrayLike(Uint8Array,"be")}(this.data.array,t.data.array,this.type);return b.hash(e)}toPublic(){const t=function(t,e){const r=St(e).keyFromPrivate(t).getPublic();return new Uint8Array(r.encodeCompressed())}(this.data.array,this.type);return At.from({compressed:t,type:this.type})}toWif(){if(this.type!==A.K1)throw new Error("Unable to generate WIF for non-k1 key");return wt.encodeCheck(m.from([128]).appending(this.data))}toString(){return`PVT_${this.type}_${wt.encodeRipemd160Check(this.data,this.type)}`}toJSON(){return this.toString()}}var Et;let Bt=Et=class extends rt{static from(t){if("string"===typeof t){const e=t.split("@");if(2!==e.length&&e[0].length>0&&e[1].length>0)throw new Error("Invalid permission level string, should be in the format <actor>@<permission>");t={actor:e[0],permission:e[1]}}return super.from(t)}equals(t){const e=Et.from(t);return this.actor.equals(e.actor)&&this.permission.equals(e.permission)}toString(){return`${this.actor}@${this.permission}`}};var Ut;(0,d.__decorate)([rt.field("name")],Bt.prototype,"actor",void 0),(0,d.__decorate)([rt.field("name")],Bt.prototype,"permission",void 0),Bt=Et=(0,d.__decorate)([rt.type("permission_level")],Bt);let Pt=Ut=class extends rt{static from(t,e){const r=t.data;if(!m.isBytes(r)){let o;if(e)o=ht.from(e).getActionType(t.name);else if(!r.constructor||void 0===r.constructor.abiName)throw new Error("Missing ABI definition when creating action with untyped action data");t={...t,data:X({object:r,type:o,abi:e})}}return super.from(t)}equals(t){const e=Ut.from(t);return this.account.equals(e.account)&&this.name.equals(e.name)&&function(t,e){const r=t.length;if(r!==e.length)return!1;for(let o=0;o<r;o++)if(!t[o].equals(e[o]))return!1;return!0}(this.authorization,e.authorization)&&this.data.equals(e.data)}decodeData(t){if("string"===typeof t||t.abiName)return J({data:this.data,type:t});{const e=ht.from(t),r=e.getActionType(this.name);if(!r)throw new Error(`Action ${this.name} does not exist in provided ABI`);return J({data:this.data,type:r,abi:e})}}};var Vt;(0,d.__decorate)([rt.field("name")],Pt.prototype,"account",void 0),(0,d.__decorate)([rt.field("name")],Pt.prototype,"name",void 0),(0,d.__decorate)([rt.field(Bt,{array:!0})],Pt.prototype,"authorization",void 0),(0,d.__decorate)([rt.field("bytes")],Pt.prototype,"data",void 0),Pt=Ut=(0,d.__decorate)([rt.type("action")],Pt);let Ct=class extends rt{};(0,d.__decorate)([rt.field("uint16")],Ct.prototype,"type",void 0),(0,d.__decorate)([rt.field("bytes")],Ct.prototype,"data",void 0),Ct=(0,d.__decorate)([rt.type("transaction_extension")],Ct);let Wt=class extends rt{static from(t){return super.from({max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,...t})}};(0,d.__decorate)([rt.field("time_point_sec")],Wt.prototype,"expiration",void 0),(0,d.__decorate)([rt.field("uint16")],Wt.prototype,"ref_block_num",void 0),(0,d.__decorate)([rt.field("uint32")],Wt.prototype,"ref_block_prefix",void 0),(0,d.__decorate)([rt.field("varuint32")],Wt.prototype,"max_net_usage_words",void 0),(0,d.__decorate)([rt.field("uint8")],Wt.prototype,"max_cpu_usage_ms",void 0),(0,d.__decorate)([rt.field("varuint32")],Wt.prototype,"delay_sec",void 0),Wt=(0,d.__decorate)([rt.type("transaction_header")],Wt);let $t=Vt=class extends Wt{static from(t,e){const r=t=>{return Pt.from(t,(r=t.account,e?Array.isArray(e)?e.filter((t=>dt.from(t.contract).equals(r))).map((({abi:t})=>t))[0]:e:void 0));var r},o=(t.actions||[]).map(r),i=(t.context_free_actions||[]).map(r),n={transaction_extensions:[],...t,context_free_actions:i,actions:o};return super.from(n)}equals(t){const e=Vt.from(t);return this.id.equals(e.id)}get id(){return v.hash(X({object:this}))}signingDigest(t){const e=this.signingData(t);return v.hash(e)}signingData(t){let e=m.from(v.from(t).array);return e=e.appending(X({object:this})),e=e.appending(new Uint8Array(32)),e}};(0,d.__decorate)([rt.field(Pt,{array:!0})],$t.prototype,"context_free_actions",void 0),(0,d.__decorate)([rt.field(Pt,{array:!0})],$t.prototype,"actions",void 0),(0,d.__decorate)([rt.field(Ct,{array:!0})],$t.prototype,"transaction_extensions",void 0),$t=Vt=(0,d.__decorate)([rt.type("transaction")],$t);let qt=class extends $t{get transaction(){return $t.from({...this,signatures:void 0,context_free_data:void 0})}get id(){return this.transaction.id}static from(t){return super.from({signatures:[],context_free_data:[],...t})}};(0,d.__decorate)([rt.field("signature[]")],qt.prototype,"signatures",void 0),(0,d.__decorate)([rt.field("bytes[]")],qt.prototype,"context_free_data",void 0),qt=(0,d.__decorate)([rt.type("signed_transaction")],qt);let jt=class extends rt{static from(t){return super.from({signatures:[],packed_context_free_data:"",compression:0,...t})}static fromSigned(t){const e=$t.from(t);return this.from({signatures:t.signatures,packed_context_free_data:X({object:t.context_free_data,type:"bytes[]"}),packed_trx:X({object:e})})}getTransaction(){if(0!==Number(this.compression))throw new Error("Transaction compression not supported yet");return J({data:this.packed_trx,type:$t})}getSignedTransaction(){const t=this.getTransaction();return qt.from({...t,signatures:this.signatures})}};(0,d.__decorate)([rt.field("signature[]")],jt.prototype,"signatures",void 0),(0,d.__decorate)([rt.field("uint8")],jt.prototype,"compression",void 0),(0,d.__decorate)([rt.field("bytes")],jt.prototype,"packed_context_free_data",void 0),(0,d.__decorate)([rt.field("bytes")],jt.prototype,"packed_trx",void 0),jt=(0,d.__decorate)([rt.type("packed_transaction")],jt);let Dt=class extends rt{};var Ft;(0,d.__decorate)([rt.field("string")],Dt.prototype,"status",void 0),(0,d.__decorate)([rt.field("uint32")],Dt.prototype,"cpu_usage_us",void 0),(0,d.__decorate)([rt.field("uint32")],Dt.prototype,"net_usage_words",void 0),Dt=(0,d.__decorate)([rt.type("transaction_receipt")],Dt);let Tt=class extends U{};Tt=(0,d.__decorate)([ot("weight_type")],Tt);let Ot=class extends rt{};(0,d.__decorate)([rt.field(At)],Ot.prototype,"key",void 0),(0,d.__decorate)([rt.field(Tt)],Ot.prototype,"weight",void 0),Ot=(0,d.__decorate)([rt.type("key_weight")],Ot);let Mt=class extends rt{};(0,d.__decorate)([rt.field(Bt)],Mt.prototype,"permission",void 0),(0,d.__decorate)([rt.field(Tt)],Mt.prototype,"weight",void 0),Mt=(0,d.__decorate)([rt.type("permission_level_weight")],Mt);let Rt=class extends rt{};(0,d.__decorate)([rt.field(P)],Rt.prototype,"wait_sec",void 0),(0,d.__decorate)([rt.field(Tt)],Rt.prototype,"weight",void 0),Rt=(0,d.__decorate)([rt.type("wait_weight")],Rt);let Lt=Ft=class extends rt{static from(t){if(_(t,Ft))return t;const e=super.from({keys:[],accounts:[],waits:[],...t});return e.sort(),e}get waitThreshold(){return this.waits.reduce(((t,e)=>t+e.weight.toNumber()),0)}get keyThreshold(){return this.threshold.toNumber()-this.waitThreshold}keyWeight(t){const e=this.keys.find((({key:e})=>e.equals(t)));return e?e.weight.toNumber():0}hasPermission(t,e=!1){const r=e?1:this.keyThreshold;return this.keyWeight(t)>=r}sort(){this.keys.sort(((t,e)=>String(t.key).localeCompare(String(e.key)))),this.accounts.sort(((t,e)=>String(t.permission).localeCompare(String(e.permission)))),this.waits.sort(((t,e)=>String(t.wait_sec).localeCompare(String(e.wait_sec))))}};var zt;(0,d.__decorate)([rt.field(P)],Lt.prototype,"threshold",void 0),(0,d.__decorate)([rt.field(Ot,{array:!0})],Lt.prototype,"keys",void 0),(0,d.__decorate)([rt.field(Mt,{array:!0})],Lt.prototype,"accounts",void 0),(0,d.__decorate)([rt.field(Rt,{array:!0})],Lt.prototype,"waits",void 0),Lt=Ft=(0,d.__decorate)([rt.type("authority")],Lt),function(t){t.encode=X,t.decode=J,t.synthesize=function(t){return j(t).abi},t.stringify=function(t){return JSON.stringify(t)},t.objectify=function(t){const e=t=>{switch(typeof t){case"boolean":case"number":case"string":return t;case"object":{if(null===t)return t;if("function"===typeof t.toJSON)return e(t.toJSON());if(Array.isArray(t))return t.map(e);const r={};for(const o of Object.keys(t))r[o]=e(t[o]);return r}}};return e(t)}}(zt||(zt={}));class Jt{constructor(t,e={}){if((t=t.trim()).endsWith("/")&&(t=t.slice(0,-1)),this.url=t,e.fetch)this.fetch=e.fetch;else if("undefined"!==typeof window&&window.fetch)this.fetch=window.fetch.bind(window);else{if("undefined"===typeof r.g||!r.g.fetch)throw new Error("Missing fetch");this.fetch=r.g.fetch.bind(r.g)}}async call(t,e){const r=this.url+t,o=await this.fetch(r,{method:"POST",body:void 0!==e?JSON.stringify(e):void 0}),i=await o.text();let n;try{n=JSON.parse(i)}catch{}const a={};for(const[s,c]of o.headers.entries())a[s]=c;return{headers:a,status:o.status,json:n,text:i}}}let Kt=class extends rt{};(0,d.__decorate)([rt.field("name")],Kt.prototype,"perm_name",void 0),(0,d.__decorate)([rt.field("name")],Kt.prototype,"parent",void 0),(0,d.__decorate)([rt.field(Lt)],Kt.prototype,"required_auth",void 0),Kt=(0,d.__decorate)([rt.type("account_permission")],Kt);let Ht=class extends rt{};(0,d.__decorate)([rt.field("int64")],Ht.prototype,"used",void 0),(0,d.__decorate)([rt.field("int64")],Ht.prototype,"available",void 0),(0,d.__decorate)([rt.field("int64")],Ht.prototype,"max",void 0),Ht=(0,d.__decorate)([rt.type("account_resource_limit")],Ht);let Zt=class extends rt{};(0,d.__decorate)([rt.field("name")],Zt.prototype,"owner",void 0),(0,d.__decorate)([rt.field("asset")],Zt.prototype,"net_weight",void 0),(0,d.__decorate)([rt.field("asset")],Zt.prototype,"cpu_weight",void 0),(0,d.__decorate)([rt.field("uint64")],Zt.prototype,"ram_bytes",void 0),Zt=(0,d.__decorate)([rt.type("account_total_resources")],Zt);let Gt=class extends rt{};(0,d.__decorate)([rt.field("name")],Gt.prototype,"from",void 0),(0,d.__decorate)([rt.field("name")],Gt.prototype,"to",void 0),(0,d.__decorate)([rt.field("asset")],Gt.prototype,"net_weight",void 0),(0,d.__decorate)([rt.field("asset")],Gt.prototype,"cpu_weight",void 0),Gt=(0,d.__decorate)([rt.type("account_self_delegated_bandwidth")],Gt);let Yt=class extends rt{};(0,d.__decorate)([rt.field("name")],Yt.prototype,"owner",void 0),(0,d.__decorate)([rt.field("time_point")],Yt.prototype,"request_time",void 0),(0,d.__decorate)([rt.field("asset")],Yt.prototype,"net_amount",void 0),(0,d.__decorate)([rt.field("asset")],Yt.prototype,"cpu_amount",void 0),Yt=(0,d.__decorate)([rt.type("account_refund_request")],Yt);let Qt=class extends rt{};(0,d.__decorate)([rt.field("name")],Qt.prototype,"owner",void 0),(0,d.__decorate)([rt.field("name")],Qt.prototype,"proxy",void 0),(0,d.__decorate)([rt.field("name",{array:!0})],Qt.prototype,"producers",void 0),(0,d.__decorate)([rt.field("int64",{optional:!0})],Qt.prototype,"staked",void 0),(0,d.__decorate)([rt.field("bool")],Qt.prototype,"is_proxy",void 0),(0,d.__decorate)([rt.field("uint32",{optional:!0})],Qt.prototype,"flags1",void 0),(0,d.__decorate)([rt.field("uint32")],Qt.prototype,"reserved2",void 0),(0,d.__decorate)([rt.field("string")],Qt.prototype,"reserved3",void 0),Qt=(0,d.__decorate)([rt.type("account_voter_info")],Qt);let Xt=class extends rt{};(0,d.__decorate)([rt.field("time_point",{optional:!0})],Xt.prototype,"key",void 0),(0,d.__decorate)([rt.field("int64",{optional:!0})],Xt.prototype,"value",void 0),(0,d.__decorate)([rt.field("time_point",{optional:!0})],Xt.prototype,"first",void 0),(0,d.__decorate)([rt.field("int64",{optional:!0})],Xt.prototype,"second",void 0),Xt=(0,d.__decorate)([rt.type("account_rex_info_maturities")],Xt);let te=class extends rt{};(0,d.__decorate)([rt.field("uint32")],te.prototype,"version",void 0),(0,d.__decorate)([rt.field("name")],te.prototype,"owner",void 0),(0,d.__decorate)([rt.field("asset")],te.prototype,"vote_stake",void 0),(0,d.__decorate)([rt.field("asset")],te.prototype,"rex_balance",void 0),(0,d.__decorate)([rt.field("int64")],te.prototype,"matured_rex",void 0),(0,d.__decorate)([rt.field(Xt,{array:!0})],te.prototype,"rex_maturities",void 0),te=(0,d.__decorate)([rt.type("account_rex_info")],te);let ee=class extends rt{getPermission(t){const e=dt.from(t),r=this.permissions.find((t=>t.perm_name.equals(e)));if(!r)throw new Error(`Unknown permission ${e} on account ${this.account_name}.`);return r}};(0,d.__decorate)([rt.field("name")],ee.prototype,"account_name",void 0),(0,d.__decorate)([rt.field("uint32")],ee.prototype,"head_block_num",void 0),(0,d.__decorate)([rt.field("time_point")],ee.prototype,"head_block_time",void 0),(0,d.__decorate)([rt.field("bool")],ee.prototype,"privileged",void 0),(0,d.__decorate)([rt.field("time_point")],ee.prototype,"last_code_update",void 0),(0,d.__decorate)([rt.field("time_point")],ee.prototype,"created",void 0),(0,d.__decorate)([rt.field("asset?")],ee.prototype,"core_liquid_balance",void 0),(0,d.__decorate)([rt.field("int64")],ee.prototype,"ram_quota",void 0),(0,d.__decorate)([rt.field("int64")],ee.prototype,"net_weight",void 0),(0,d.__decorate)([rt.field("int64")],ee.prototype,"cpu_weight",void 0),(0,d.__decorate)([rt.field(Ht)],ee.prototype,"net_limit",void 0),(0,d.__decorate)([rt.field(Ht)],ee.prototype,"cpu_limit",void 0),(0,d.__decorate)([rt.field("uint64")],ee.prototype,"ram_usage",void 0),(0,d.__decorate)([rt.field(Kt,{array:!0})],ee.prototype,"permissions",void 0),(0,d.__decorate)([rt.field(Zt,{optional:!0})],ee.prototype,"total_resources",void 0),(0,d.__decorate)([rt.field(Gt,{optional:!0})],ee.prototype,"self_delegated_bandwidth",void 0),(0,d.__decorate)([rt.field(Yt,{optional:!0})],ee.prototype,"refund_request",void 0),(0,d.__decorate)([rt.field(Qt,{optional:!0})],ee.prototype,"voter_info",void 0),(0,d.__decorate)([rt.field(te,{optional:!0})],ee.prototype,"rex_info",void 0),ee=(0,d.__decorate)([rt.type("account_object")],ee);let re=class extends rt{};(0,d.__decorate)([rt.field("name")],re.prototype,"producer_name",void 0),(0,d.__decorate)([rt.field("public_key")],re.prototype,"block_signing_key",void 0),re=(0,d.__decorate)([rt.type("new_producers_entry")],re);let oe=class extends rt{};(0,d.__decorate)([rt.field("uint32")],oe.prototype,"version",void 0),(0,d.__decorate)([rt.field(re,{array:!0})],oe.prototype,"producers",void 0),oe=(0,d.__decorate)([rt.type("new_producers")],oe);let ie=class extends rt{};(0,d.__decorate)([rt.field("uint16")],ie.prototype,"type",void 0),(0,d.__decorate)([rt.field("bytes")],ie.prototype,"data",void 0),ie=(0,d.__decorate)([rt.type("block_extension")],ie);let ne=class extends rt{};(0,d.__decorate)([rt.field("uint16")],ne.prototype,"type",void 0),(0,d.__decorate)([rt.field("bytes")],ne.prototype,"data",void 0),ne=(0,d.__decorate)([rt.type("header_extension")],ne);class ae{constructor(t,e){this.id=t,this.extra=e}static from(t){let e,r;return"string"===typeof t?(e=v.from(t),r={}):(e=v.from(t.id),r=t),new this(e,r)}get transaction(){if(this.extra.packed_trx)return zt.decode({data:this.extra.packed_trx,type:$t})}get signatures(){if(this.extra.signatures)return this.extra.signatures.map(kt.from)}equals(t){return this.id.equals(t.id)}toJSON(){return this.id}}ae.abiName="trx_variant";let se=class extends Dt{get id(){return this.trx.id}};(0,d.__decorate)([rt.field(ae)],se.prototype,"trx",void 0),se=(0,d.__decorate)([rt.type("get_block_response_receipt")],se);let ce=class extends rt{};(0,d.__decorate)([rt.field("time_point")],ce.prototype,"timestamp",void 0),(0,d.__decorate)([rt.field("name")],ce.prototype,"producer",void 0),(0,d.__decorate)([rt.field("uint16")],ce.prototype,"confirmed",void 0),(0,d.__decorate)([rt.field("checksum256")],ce.prototype,"previous",void 0),(0,d.__decorate)([rt.field("checksum256")],ce.prototype,"transaction_mroot",void 0),(0,d.__decorate)([rt.field("checksum256")],ce.prototype,"action_mroot",void 0),(0,d.__decorate)([rt.field("uint32")],ce.prototype,"schedule_version",void 0),(0,d.__decorate)([rt.field(oe,{optional:!0})],ce.prototype,"new_producers",void 0),(0,d.__decorate)([rt.field("header_extension",{optional:!0})],ce.prototype,"header_extensions",void 0),(0,d.__decorate)([rt.field("any",{optional:!0})],ce.prototype,"new_protocol_features",void 0),(0,d.__decorate)([rt.field("signature")],ce.prototype,"producer_signature",void 0),(0,d.__decorate)([rt.field(se,{array:!0})],ce.prototype,"transactions",void 0),(0,d.__decorate)([rt.field("block_extension",{optional:!0})],ce.prototype,"block_extensions",void 0),(0,d.__decorate)([rt.field("checksum256")],ce.prototype,"id",void 0),(0,d.__decorate)([rt.field("uint32")],ce.prototype,"block_num",void 0),(0,d.__decorate)([rt.field("uint32")],ce.prototype,"ref_block_prefix",void 0),ce=(0,d.__decorate)([rt.type("get_block_response")],ce);let de=class extends rt{};(0,d.__decorate)([rt.field("name")],de.prototype,"producer_name",void 0),(0,d.__decorate)([rt.field("any")],de.prototype,"authority",void 0),de=(0,d.__decorate)([rt.type("active_schedule_producer_authority")],de);let ue=class extends rt{};(0,d.__decorate)([rt.field("name")],ue.prototype,"producer_name",void 0),(0,d.__decorate)([rt.field(de)],ue.prototype,"authority",void 0),ue=(0,d.__decorate)([rt.type("active_schedule_producer")],ue);let le=class extends rt{};(0,d.__decorate)([rt.field("uint32")],le.prototype,"version",void 0),(0,d.__decorate)([rt.field(ue,{array:!0})],le.prototype,"producers",void 0),le=(0,d.__decorate)([rt.type("active_schedule")],le);let pe=class extends rt{};(0,d.__decorate)([rt.field("time_point")],pe.prototype,"timestamp",void 0),(0,d.__decorate)([rt.field("name")],pe.prototype,"producer",void 0),(0,d.__decorate)([rt.field("uint16")],pe.prototype,"confirmed",void 0),(0,d.__decorate)([rt.field("checksum256")],pe.prototype,"previous",void 0),(0,d.__decorate)([rt.field("checksum256")],pe.prototype,"transaction_mroot",void 0),(0,d.__decorate)([rt.field("checksum256")],pe.prototype,"action_mroot",void 0),(0,d.__decorate)([rt.field("uint32")],pe.prototype,"schedule_version",void 0),(0,d.__decorate)([rt.field(ne,{array:!0,optional:!0})],pe.prototype,"header_extensions",void 0),(0,d.__decorate)([rt.field("signature")],pe.prototype,"producer_signature",void 0),pe=(0,d.__decorate)([rt.type("block_state_header")],pe);let fe=class extends rt{};(0,d.__decorate)([rt.field("uint32")],fe.prototype,"block_num",void 0),(0,d.__decorate)([rt.field("uint32")],fe.prototype,"dpos_proposed_irreversible_blocknum",void 0),(0,d.__decorate)([rt.field("uint32")],fe.prototype,"dpos_irreversible_blocknum",void 0),(0,d.__decorate)([rt.field("checksum256")],fe.prototype,"id",void 0),(0,d.__decorate)([rt.field(pe)],fe.prototype,"header",void 0),(0,d.__decorate)([rt.field("any")],fe.prototype,"active_schedule",void 0),(0,d.__decorate)([rt.field("any")],fe.prototype,"blockroot_merkle",void 0),(0,d.__decorate)([rt.field("any")],fe.prototype,"producer_to_last_produced",void 0),(0,d.__decorate)([rt.field("any")],fe.prototype,"producer_to_last_implied_irb",void 0),(0,d.__decorate)([rt.field("any")],fe.prototype,"valid_block_signing_authority",void 0),(0,d.__decorate)([rt.field("any")],fe.prototype,"confirm_count",void 0),(0,d.__decorate)([rt.field("any")],fe.prototype,"pending_schedule",void 0),(0,d.__decorate)([rt.field("any")],fe.prototype,"activated_protocol_features",void 0),(0,d.__decorate)([rt.field("any")],fe.prototype,"additional_signatures",void 0),fe=(0,d.__decorate)([rt.type("get_block_header_state_response")],fe);let he=class extends rt{getTransactionHeader(t=120){const e=pt.fromMilliseconds(this.head_block_time.toMilliseconds()+1e3*t),r=this.last_irreversible_block_id.array.subarray(8,12),o=new Uint32Array(r.buffer,r.byteOffset,1)[0];return Wt.from({expiration:e,ref_block_num:65535&Number(this.last_irreversible_block_num),ref_block_prefix:o})}};(0,d.__decorate)([rt.field("string")],he.prototype,"server_version",void 0),(0,d.__decorate)([rt.field("checksum256")],he.prototype,"chain_id",void 0),(0,d.__decorate)([rt.field("uint32")],he.prototype,"head_block_num",void 0),(0,d.__decorate)([rt.field("uint32")],he.prototype,"last_irreversible_block_num",void 0),(0,d.__decorate)([rt.field("checksum256")],he.prototype,"last_irreversible_block_id",void 0),(0,d.__decorate)([rt.field("checksum256")],he.prototype,"head_block_id",void 0),(0,d.__decorate)([rt.field("time_point")],he.prototype,"head_block_time",void 0),(0,d.__decorate)([rt.field("name")],he.prototype,"head_block_producer",void 0),(0,d.__decorate)([rt.field("uint64")],he.prototype,"virtual_block_cpu_limit",void 0),(0,d.__decorate)([rt.field("uint64")],he.prototype,"virtual_block_net_limit",void 0),(0,d.__decorate)([rt.field("uint64")],he.prototype,"block_cpu_limit",void 0),(0,d.__decorate)([rt.field("uint64")],he.prototype,"block_net_limit",void 0),(0,d.__decorate)([rt.field("string?")],he.prototype,"server_version_string",void 0),(0,d.__decorate)([rt.field("uint32?")],he.prototype,"fork_db_head_block_num",void 0),(0,d.__decorate)([rt.field("checksum256?")],he.prototype,"fork_db_head_block_id",void 0),he=(0,d.__decorate)([rt.type("get_info_response")],he);let ye=class extends rt{};(0,d.__decorate)([rt.field("name")],ye.prototype,"code",void 0),(0,d.__decorate)([rt.field("name")],ye.prototype,"scope",void 0),(0,d.__decorate)([rt.field("name")],ye.prototype,"table",void 0),(0,d.__decorate)([rt.field("name")],ye.prototype,"payer",void 0),(0,d.__decorate)([rt.field("uint32")],ye.prototype,"count",void 0),ye=(0,d.__decorate)([rt.type("get_table_by_scope_response_row")],ye);let _e=class extends rt{};(0,d.__decorate)([rt.field(ye,{array:!0})],_e.prototype,"rows",void 0),(0,d.__decorate)([rt.field("string")],_e.prototype,"more",void 0),_e=(0,d.__decorate)([rt.type("get_table_by_scope_response")],_e);let me=class extends rt{};(0,d.__decorate)([rt.field(V)],me.prototype,"global_action_seq",void 0),(0,d.__decorate)([rt.field(I)],me.prototype,"account_action_seq",void 0),(0,d.__decorate)([rt.field(P)],me.prototype,"block_num",void 0),(0,d.__decorate)([rt.field(ft)],me.prototype,"block_time",void 0),(0,d.__decorate)([rt.field("any")],me.prototype,"action_trace",void 0),(0,d.__decorate)([rt.field("boolean?")],me.prototype,"irrevirsible",void 0),me=(0,d.__decorate)([rt.type("ordered_action_result")],me);let ge=class extends rt{};(0,d.__decorate)([rt.field(me,{array:!0})],ge.prototype,"actions",void 0),(0,d.__decorate)([rt.field(N)],ge.prototype,"last_irreversible_block",void 0),(0,d.__decorate)([rt.field(N)],ge.prototype,"head_block_num",void 0),(0,d.__decorate)([rt.field("boolean?")],ge.prototype,"time_limit_exceeded_error",void 0),ge=(0,d.__decorate)([rt.type("get_actions_response")],ge);let ve=class extends rt{};ve=(0,d.__decorate)([rt.type("transaction_trace")],ve);let be=class extends rt{};(0,d.__decorate)([rt.field("any")],be.prototype,"actions",void 0),(0,d.__decorate)([rt.field("any")],be.prototype,"context_free_actions",void 0),(0,d.__decorate)([rt.field("any")],be.prototype,"context_free_data",void 0),(0,d.__decorate)([rt.field("number")],be.prototype,"delay_sec",void 0),(0,d.__decorate)([rt.field("string")],be.prototype,"expiration",void 0),(0,d.__decorate)([rt.field("number")],be.prototype,"max_cpu_usage_ms",void 0),(0,d.__decorate)([rt.field("number")],be.prototype,"max_net_usage_words",void 0),(0,d.__decorate)([rt.field("number")],be.prototype,"ref_block_num",void 0),(0,d.__decorate)([rt.field("number")],be.prototype,"ref_block_prefix",void 0),(0,d.__decorate)([rt.field("string",{array:!0})],be.prototype,"signatures",void 0),be=(0,d.__decorate)([rt.type("trx")],be);let we=class extends rt{};(0,d.__decorate)([rt.field(Dt)],we.prototype,"receipt",void 0),(0,d.__decorate)([rt.field("trx")],we.prototype,"trx",void 0),we=(0,d.__decorate)([rt.type("transaction_info")],we);let Ae=class extends rt{};(0,d.__decorate)([rt.field(v)],Ae.prototype,"id",void 0),(0,d.__decorate)([rt.field(P)],Ae.prototype,"block_num",void 0),(0,d.__decorate)([rt.field(ft)],Ae.prototype,"block_time",void 0),(0,d.__decorate)([rt.field(P)],Ae.prototype,"last_irreversible_block",void 0),(0,d.__decorate)([rt.field("any?")],Ae.prototype,"traces",void 0),(0,d.__decorate)([rt.field("any")],Ae.prototype,"trx",void 0),Ae=(0,d.__decorate)([rt.type("get_transaction_response")],Ae);let xe=class extends rt{};(0,d.__decorate)([rt.field("name",{array:!0})],xe.prototype,"account_names",void 0),xe=(0,d.__decorate)([rt.type("get_key_accounts_response")],xe);let Se=class extends rt{};(0,d.__decorate)([rt.field("name",{array:!0})],Se.prototype,"controlled_accounts",void 0),Se=(0,d.__decorate)([rt.type("get_controlled_accounts_response")],Se);let ke=class extends rt{};(0,d.__decorate)([rt.field("string")],ke.prototype,"state",void 0),(0,d.__decorate)([rt.field("uint32")],ke.prototype,"head_number",void 0),(0,d.__decorate)([rt.field("checksum256")],ke.prototype,"head_id",void 0),(0,d.__decorate)([rt.field("time_point")],ke.prototype,"head_timestamp",void 0),(0,d.__decorate)([rt.field("uint32")],ke.prototype,"irreversible_number",void 0),(0,d.__decorate)([rt.field("checksum256")],ke.prototype,"irreversible_id",void 0),(0,d.__decorate)([rt.field("time_point")],ke.prototype,"irreversible_timestamp",void 0),(0,d.__decorate)([rt.field("checksum256")],ke.prototype,"earliest_tracked_block_id",void 0),(0,d.__decorate)([rt.field("uint32")],ke.prototype,"earliest_tracked_block_number",void 0),ke=(0,d.__decorate)([rt.type("get_transaction_status_response")],ke);class Ne{constructor(t){this.client=t}async get_abi(t){return this.client.call({path:"/v1/chain/get_abi",params:{account_name:dt.from(t)}})}async get_account(t){return this.client.call({path:"/v1/chain/get_account",params:{account_name:dt.from(t)},responseType:ee})}async get_block(t){return this.client.call({path:"/v1/chain/get_block",params:{block_num_or_id:t},responseType:ce})}async get_block_header_state(t){return this.client.call({path:"/v1/chain/get_block_header_state",params:{block_num_or_id:t},responseType:fe})}async get_currency_balance(t,e,r){const o={account:dt.from(e),code:dt.from(t)};return r&&(o.symbol=r),this.client.call({path:"/v1/chain/get_currency_balance",params:o,responseType:"asset[]"})}async get_info(){return this.client.call({path:"/v1/chain/get_info",responseType:he})}async compute_transaction(t){return _(t,jt)||(t=jt.fromSigned(qt.from(t))),this.client.call({path:"/v1/chain/compute_transaction",params:{transaction:t}})}async push_transaction(t){return _(t,jt)||(t=jt.fromSigned(qt.from(t))),this.client.call({path:"/v1/chain/push_transaction",params:t})}async send_transaction(t){return _(t,jt)||(t=jt.fromSigned(qt.from(t))),this.client.call({path:"/v1/chain/send_transaction",params:t})}async send_transaction2(t,e){return _(t,jt)||(t=jt.fromSigned(qt.from(t))),this.client.call({path:"/v1/chain/send_transaction2",params:{return_failure_trace:!0,retry_trx:!1,retry_trx_num_blocks:0,transaction:t,...e}})}async get_table_rows(t){const e=t.type;let r=t.key_type;const o=t.lower_bound||t.upper_bound;!r&&o&&(_(o,V)?r="i64":_(o,C)?r="i128":_(o,v)?r="sha256":_(o,w)&&(r="ripemd160")),r||(r="name");let i=t.json;void 0===i&&(i=void 0===e);let n=t.upper_bound;n&&"string"!==typeof n&&(n=String(n));let a=t.lower_bound;a&&"string"!==typeof a&&(a=String(a));let s=t.scope;"undefined"===typeof s?s=String(dt.from(t.code)):"string"!==typeof s&&(s=String(s));let c,{rows:d,more:u,next_key:l}=await this.client.call({path:"/v1/chain/get_table_rows",params:{...t,code:dt.from(t.code),table:dt.from(t.table),limit:void 0!==t.limit?P.from(t.limit):void 0,scope:s,key_type:r,json:i,upper_bound:n,lower_bound:a}});if(t.show_payer&&(c=[],d=d.map((({data:t,payer:e})=>(c.push(dt.from(e)),t)))),e&&(d=i?d.map((t=>"string"===typeof t&&m.isBytes(t)?zt.decode({data:m.from(t),type:e}):zt.decode({object:t,type:e}))):d.map((t=>m.from(t))).map((t=>zt.decode({data:t,type:e})))),l&&l.length>0){let t;switch(r){case"i64":t=V;break;case"i128":t=C;break;case"name":t=dt;break;case"float64":t=st;break;case"float128":t=ct;break;case"sha256":t=v;break;case"ripemd160":t=w;break;default:throw new Error(`Unsupported key type: ${r}`)}l=t===dt?dt.from(zt.decode({object:l,type:V})):zt.decode({object:l,type:t})}else l=void 0;return{rows:d,more:u,next_key:l,ram_payers:c}}async get_table_by_scope(t){return this.client.call({path:"/v1/chain/get_table_by_scope",params:t,responseType:_e})}async get_transaction_status(t){return this.client.call({path:"/v1/chain/get_transaction_status",params:{id:v.from(t)},responseType:ke})}}class Ie{constructor(t){this.client=t}async get_actions(t,e,r){return this.client.call({path:"/v1/history/get_actions",params:{account_name:dt.from(t),pos:N.from(e),offset:N.from(r)},responseType:ge})}async get_transaction(t,e={}){return this.client.call({path:"/v1/history/get_transaction",params:{id:v.from(t),block_num_hint:e.blockNumHint&&P.from(e.blockNumHint),traces:!0!==e.excludeTraces&&void 0},responseType:Ae})}async get_key_accounts(t){return this.client.call({path:"/v1/history/get_key_accounts",params:{public_key:At.from(t)},responseType:xe})}async get_controlled_accounts(t){return this.client.call({path:"/v1/history/get_controlled_accounts",params:{controlling_account:dt.from(t)},responseType:Se})}}class Ee extends Error{constructor(t,e){let r;r=e.json&&e.json.error?`${Ee.formatError(e.json.error)} at ${t}`:`HTTP ${e.status} at ${t}`,super(r),this.path=t,this.response=e}static formatError(t){return"unspecified"===t.what&&t.details[0].file&&"http_plugin.cpp"===t.details[0].file&&"unknown key"===t.details[0].message.slice(0,11)?"Account not found":"unspecified"===t.what&&t.details&&t.details.length>0?t.details[0].message:t.what&&t.what.length>0?t.what:"Unknown API error"}get error(){const{json:t}=this.response;return t?t.error:void 0}get name(){const{error:t}=this;return t?t.name:"unspecified"}get code(){const{error:t}=this;return t?t.code:0}get details(){const{error:t}=this;return t?t.details:[]}}Ee.__className="APIError";class Be{constructor(t){if(this.v1={chain:new Ne(this),history:new Ie(this)},t.provider)this.provider=t.provider;else{if(!t.url)throw new Error("Missing url or provider");this.provider=new Jt(t.url,t)}}async call(t){const e=await this.provider.call(t.path,t.params),{json:r}=e;if(2!==Math.floor(e.status/100)||r&&"object"===typeof r.error)throw new Ee(t.path,e);return t.responseType?J({type:t.responseType,object:e.json}):e.json||e.text}}Be.__className="APIClient"}}]);